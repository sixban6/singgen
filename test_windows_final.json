{
  "log": {
    "disabled": false,
    "level": "warn",
    "timestamp": true
  },
  "experimental": {
    "cache_file": {
      "enabled": true
    },
    "clash_api": {
      "default_mode": "rule",
      "external_controller": "127.0.0.1:9095",
      "external_ui": "/etc/sing-box/ui",
      "external_ui_download_detour": "DirectConn",
      "external_ui_download_url": "https://ghfast.top/https://github.com/MetaCubeX/Yacd-meta/archive/gh-pages.zip",
      "secret": ""
    }
  },
  "dns": {
    "client_subnet": "202.101.170.1/24",
    "disable_cache": false,
    "disable_expire": false,
    "final": "dns_proxy",
    "independent_cache": false,
    "rules": [
      {
        "clash_mode": "Direct",
        "server": "dns_local"
      },
      {
        "clash_mode": "Global",
        "server": "dns_proxy"
      },
      {
        "rule_set": "geosite-cn",
        "server": "dns_local"
      },
      {
        "rule_set": "geosite-geolocation-!cn",
        "server": "dns_proxy"
      }
    ],
    "servers": [
      {
        "server": "114.114.114.114",
        "tag": "dns_local",
        "type": "udp"
      },
      {
        "detour": "DNS",
        "server": "8.8.8.8",
        "tag": "dns_proxy",
        "type": "https"
      }
    ],
    "strategy": "prefer_ipv4"
  },
  "inbounds": [
    {
      "address": [
        "10.8.8.8/30"
      ],
      "auto_route": true,
      "mtu": 9000,
      "route_exclude_address_set": [
        "geosite-private",
        "geosite-ctm_cn",
        "geoip-cn"
      ],
      "stack": "system",
      "tag": "tun-in",
      "type": "tun"
    }
  ],
  "outbounds": [
    {
      "outbounds": [
        "block"
      ],
      "tag": "ChainProxy",
      "type": "selector"
    },
    {
      "interrupt_exist_connections": true,
      "outbounds": [
        "AutoSelect-HK",
        "ChainProxy",
        "block"
      ],
      "tag": "DNS",
      "type": "selector"
    },
    {
      "default": "AutoSelect",
      "interrupt_exist_connections": true,
      "outbounds": [
        "AutoSelect",
        "ChainProxy",
        "HK",
        "JP",
        "Select",
        "DirectConn"
      ],
      "tag": "NodeSelect",
      "type": "selector"
    },
    {
      "default": "AutoSelect-HK",
      "interrupt_exist_connections": true,
      "outbounds": [
        "AutoSelect-HK",
        "HK",
        "NodeSelect",
        "ChainProxy",
        "AutoSelect"
      ],
      "tag": "YouTube",
      "type": "selector"
    },
    {
      "default": "AutoSelect-JP",
      "interrupt_exist_connections": true,
      "outbounds": [
        "AutoSelect-JP",
        "JP",
        "AutoSelect-US",
        "US",
        "NodeSelect"
      ],
      "tag": "OpenAI",
      "type": "selector"
    },
    {
      "default": "AutoSelect-US",
      "interrupt_exist_connections": true,
      "outbounds": [
        "AutoSelect-US",
        "NodeSelect",
        "ChainProxy",
        "Select",
        "AutoSelect"
      ],
      "tag": "Google",
      "type": "selector"
    },
    {
      "default": "AutoSelect-SG",
      "interrupt_exist_connections": true,
      "outbounds": [
        "AutoSelect-SG",
        "NodeSelect",
        "ChainProxy",
        "Select",
        "AutoSelect",
        "DirectConn"
      ],
      "tag": "Github",
      "type": "selector"
    },
    {
      "default": "AutoSelect-SG",
      "outbounds": [
        "NodeSelect",
        "ChainProxy",
        "Select",
        "AutoSelect-SG"
      ],
      "tag": "Telegram",
      "type": "selector"
    },
    {
      "outbounds": [
        "SG",
        "NodeSelect",
        "ChainProxy",
        "DirectConn"
      ],
      "tag": "Microsoft",
      "type": "selector"
    },
    {
      "outbounds": [
        "DirectConn",
        "AutoSelect"
      ],
      "tag": "Apple",
      "type": "selector"
    },
    {
      "outbounds": [
        "ChainProxy",
        "Select",
        "AutoSelect",
        "DirectConn"
      ],
      "tag": "Paypal",
      "type": "selector"
    },
    {
      "default": "AutoSelect-SG",
      "outbounds": [
        "AutoSelect-SG",
        "SG",
        "AutoSelect-HK",
        "HK",
        "ChainProxy"
      ],
      "tag": "Netflix",
      "type": "selector"
    },
    {
      "default": "AutoSelect-US",
      "outbounds": [
        "AutoSelect-US",
        "US",
        "AutoSelect-SG",
        "SG",
        "HK",
        "NodeSelect"
      ],
      "tag": "Disney+",
      "type": "selector"
    },
    {
      "default": "AutoSelect-US",
      "outbounds": [
        "AutoSelect-US",
        "US",
        "AutoSelect-HK",
        "HK",
        "TW",
        "NodeSelect"
      ],
      "tag": "HBO",
      "type": "selector"
    },
    {
      "default": "AutoSelect-US",
      "outbounds": [
        "AutoSelect-US",
        "US",
        "AutoSelect-JP",
        "JP",
        "UK",
        "NodeSelect"
      ],
      "tag": "PrimeVideo",
      "type": "selector"
    },
    {
      "default": "AutoSelect-US",
      "outbounds": [
        "AutoSelect-US",
        "US",
        "AutoSelect-HK",
        "HK",
        "TW",
        "NodeSelect"
      ],
      "tag": "Spotify",
      "type": "selector"
    },
    {
      "default": "AutoSelect-SG",
      "outbounds": [
        "AutoSelect-SG",
        "SG",
        "AutoSelect-JP",
        "JP",
        "US",
        "NodeSelect"
      ],
      "tag": "TikTok",
      "type": "selector"
    },
    {
      "default": "AutoSelect-HK",
      "outbounds": [
        "AutoSelect-HK",
        "AutoSelect-SG",
        "HK",
        "SG",
        "DirectConn"
      ],
      "tag": "Steam",
      "type": "selector"
    },
    {
      "default": "AutoSelect-HK",
      "outbounds": [
        "AutoSelect-HK",
        "HK",
        "AutoSelect-US",
        "US",
        "DirectConn"
      ],
      "tag": "Epic",
      "type": "selector"
    },
    {
      "default": "AutoSelect-HK",
      "outbounds": [
        "AutoSelect-HK",
        "HK",
        "AutoSelect-JP",
        "JP",
        "US"
      ],
      "tag": "PlayStation",
      "type": "selector"
    },
    {
      "default": "AutoSelect-HK",
      "outbounds": [
        "AutoSelect-HK",
        "HK",
        "AutoSelect-SG",
        "SG",
        "US"
      ],
      "tag": "Xbox",
      "type": "selector"
    },
    {
      "default": "AutoSelect-SG",
      "outbounds": [
        "AutoSelect-SG",
        "SG",
        "AutoSelect-JP",
        "JP",
        "DirectConn",
        "NodeSelect"
      ],
      "tag": "BTC",
      "type": "selector"
    },
    {
      "outbounds": [
        "DirectConn",
        "block"
      ],
      "tag": "Douyin",
      "type": "selector"
    },
    {
      "outbounds": [
        "DirectConn",
        "block"
      ],
      "tag": "WeChatVideo",
      "type": "selector"
    },
    {
      "outbounds": [
        "HK",
        "JP",
        "SG"
      ],
      "tag": "HoK",
      "type": "selector"
    },
    {
      "default": "AutoSelect-SG",
      "outbounds": [
        "NodeSelect",
        "ChainProxy",
        "AutoSelect-SG",
        "HK",
        "JP",
        "DirectConn"
      ],
      "tag": "Others",
      "type": "selector"
    },
    {
      "interval": "8m",
      "outbounds": [
        "block"
      ],
      "tag": "AutoSelect-HK",
      "tolerance": 150,
      "type": "urltest",
      "url": "https://cp.cloudflare.com/generate_204"
    },
    {
      "interval": "8m",
      "outbounds": [
        "block"
      ],
      "tag": "AutoSelect-JP",
      "tolerance": 150,
      "type": "urltest",
      "url": "https://cp.cloudflare.com/generate_204"
    },
    {
      "interval": "8m",
      "outbounds": [
        "block"
      ],
      "tag": "AutoSelect-US",
      "tolerance": 150,
      "type": "urltest",
      "url": "https://cp.cloudflare.com/generate_204"
    },
    {
      "interval": "8m",
      "outbounds": [
        "block"
      ],
      "tag": "AutoSelect-SG",
      "tolerance": 150,
      "type": "urltest",
      "url": "https://cp.cloudflare.com/generate_204"
    },
    {
      "interval": "8m",
      "outbounds": [
        "Test Node"
      ],
      "tag": "AutoSelect",
      "tolerance": 150,
      "type": "urltest",
      "url": "https://cp.cloudflare.com/generate_204"
    },
    {
      "outbounds": [
        "Test Node"
      ],
      "tag": "Select",
      "type": "selector"
    },
    {
      "method": "aes-256-gcm",
      "password": "test",
      "server": "127.0.0.1",
      "server_port": 8388,
      "tag": "Test Node",
      "type": "shadowsocks"
    },
    {
      "tag": "DirectConn",
      "type": "direct"
    },
    {
      "outbounds": [
        "block"
      ],
      "tag": "JP",
      "type": "selector"
    },
    {
      "outbounds": [
        "block"
      ],
      "tag": "HK",
      "type": "selector"
    },
    {
      "outbounds": [
        "block"
      ],
      "tag": "US",
      "type": "selector"
    },
    {
      "outbounds": [
        "block"
      ],
      "tag": "SG",
      "type": "selector"
    },
    {
      "outbounds": [
        "block"
      ],
      "tag": "UK",
      "type": "selector"
    },
    {
      "outbounds": [
        "block"
      ],
      "tag": "TW",
      "type": "selector"
    },
    {
      "outbounds": [
        "block"
      ],
      "tag": "KR",
      "type": "selector"
    },
    {
      "outbounds": [
        "block"
      ],
      "tag": "DE",
      "type": "selector"
    },
    {
      "outbounds": [
        "block"
      ],
      "tag": "CA",
      "type": "selector"
    },
    {
      "server": "0.0.0.0",
      "server_port": 1080,
      "tag": "block",
      "type": "socks"
    }
  ],
  "route": {
    "auto_detect_interface": true,
    "default_domain_resolver": {
      "client_subnet": "202.101.170.1/24",
      "rewrite_tll": 60,
      "server": "dns_local"
    },
    "final": "Others",
    "rule_set": [
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-ad1",
        "type": "remote",
        "url": "https://ghfast.top/https://github.com/Toperlock/sing-box-geosite/raw/main/rule/adservers.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-ad2",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/privacy-protection-tools/anti-ad.github.io/master/docs/anti-ad-sing-box.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-ctm_cn",
        "type": "remote",
        "url": "https://ghfast.top/https://github.com/sixban6/rulesets/raw/refs/heads/main/rule/direct_cn.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-chat",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-ai-chat-!cn.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-steam",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/steam.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-epic",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/epicgames.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-playstation",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/sony.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-xbox",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/xbox.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-disney",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/disney.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-hbo",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/hbo.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-primevideo",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/primevideo.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-spotify",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/spotify.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-youtube",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/youtube.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-google",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/google.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-github",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/github.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-telegram",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/telegram.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-tiktok",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/tiktok.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-netflix",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/netflix.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-apple",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/apple.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-microsoft",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/microsoft.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-onedrive",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/onedrive.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-geolocation-!cn",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/geolocation-!cn.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-cn",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/cn.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-private",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/private.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geoip-google",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/google.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geoip-telegram",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/telegram.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geoip-netflix",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/netflix.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geoip-apple",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo-lite/geoip/apple.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geoip-cn",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/cn.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geoip-private",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geoip/private.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-wx-shortvideo",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/sixban6/rulesets/refs/heads/main/rule/wx_shortvideo.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-douyin",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/sixban6/rulesets/refs/heads/main/rule/douyin.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-paypal",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/paypal.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-hok",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/sixban6/rulesets/refs/heads/main/rule/hok.srs"
      },
      {
        "download_detour": "DirectConn",
        "format": "binary",
        "tag": "geosite-cryptocurrency",
        "type": "remote",
        "url": "https://ghfast.top/https://raw.github.com/MetaCubeX/meta-rules-dat/sing/geo/geosite/category-cryptocurrency.srs"
      }
    ],
    "rules": [
      {
        "action": "sniff",
        "timeout": "1s"
      },
      {
        "action": "hijack-dns",
        "mode": "or",
        "rules": [
          {
            "port": 53
          },
          {
            "protocol": "dns"
          }
        ],
        "type": "logical"
      },
      {
        "ip_is_private": true,
        "outbound": "DirectConn"
      },
      {
        "action": "reject",
        "rule_set": [
          "geosite-ad1",
          "geosite-ad2"
        ]
      },
      {
        "action": "reject",
        "protocol": "quic"
      },
      {
        "action": "route",
        "outbound": "Steam",
        "rule_set": "geosite-steam"
      },
      {
        "action": "route",
        "outbound": "Epic",
        "rule_set": "geosite-epic"
      },
      {
        "action": "route",
        "outbound": "PlayStation",
        "rule_set": "geosite-playstation"
      },
      {
        "action": "route",
        "outbound": "Xbox",
        "rule_set": "geosite-xbox"
      },
      {
        "action": "route",
        "outbound": "Disney+",
        "rule_set": "geosite-disney"
      },
      {
        "action": "route",
        "outbound": "HBO",
        "rule_set": "geosite-hbo"
      },
      {
        "action": "route",
        "outbound": "PrimeVideo",
        "rule_set": "geosite-primevideo"
      },
      {
        "action": "route",
        "outbound": "Spotify",
        "rule_set": "geosite-spotify"
      },
      {
        "action": "route",
        "outbound": "TikTok",
        "rule_set": "geosite-tiktok"
      },
      {
        "action": "route",
        "outbound": "Douyin",
        "rule_set": "geosite-douyin"
      },
      {
        "action": "route",
        "outbound": "WeChatVideo",
        "rule_set": "geosite-wx-shortvideo"
      },
      {
        "action": "route",
        "outbound": "DirectConn",
        "protocol": "ssh"
      },
      {
        "action": "route",
        "outbound": "DirectConn",
        "protocol": "bittorrent"
      },
      {
        "action": "route",
        "clash_mode": "direct",
        "outbound": "DirectConn"
      },
      {
        "action": "route",
        "clash_mode": "global",
        "outbound": "AutoSelect"
      },
      {
        "action": "route",
        "outbound": "HoK",
        "rule_set": "geosite-hok"
      },
      {
        "action": "route",
        "domain": [
          "clash.razord.top",
          "yacd.metacubex.one",
          "yacd.haishan.me",
          "d.metacubex.one"
        ],
        "outbound": "DirectConn"
      },
      {
        "action": "route",
        "domain_suffix": [
          "z-lib.gs",
          "missav.com",
          "missav.ws"
        ],
        "outbound": "NodeSelect"
      },
      {
        "action": "route",
        "outbound": "BTC",
        "rule_set": "geosite-cryptocurrency"
      },
      {
        "action": "route",
        "outbound": "DirectConn",
        "rule_set": "geosite-ctm_cn"
      },
      {
        "action": "route",
        "outbound": "DirectConn",
        "rule_set": "geosite-private"
      },
      {
        "action": "route",
        "domain_suffix": [
          "grok.com"
        ],
        "outbound": "OpenAI",
        "rule_set": "geosite-chat"
      },
      {
        "action": "route",
        "outbound": "YouTube",
        "rule_set": "geosite-youtube"
      },
      {
        "action": "route",
        "outbound": "Github",
        "rule_set": "geosite-github"
      },
      {
        "action": "route",
        "outbound": "Google",
        "rule_set": [
          "geosite-google",
          "geoip-google"
        ]
      },
      {
        "action": "route",
        "outbound": "Telegram",
        "rule_set": [
          "geosite-telegram",
          "geoip-telegram"
        ]
      },
      {
        "action": "route",
        "outbound": "Apple",
        "rule_set": [
          "geosite-apple",
          "geoip-apple"
        ]
      },
      {
        "action": "route",
        "outbound": "Microsoft",
        "rule_set": "geosite-microsoft"
      },
      {
        "action": "route",
        "outbound": "Paypal",
        "rule_set": "geosite-paypal"
      },
      {
        "action": "route",
        "outbound": "Netflix",
        "rule_set": "geosite-netflix"
      },
      {
        "action": "route",
        "outbound": "NodeSelect",
        "rule_set": "geosite-geolocation-!cn"
      },
      {
        "action": "route",
        "outbound": "DirectConn",
        "rule_set": [
          "geoip-cn",
          "geosite-cn"
        ]
      }
    ]
  }
}